<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tim's Resto - Menu Digital</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .orange-tim { color: #FF8C00; }
        .bg-orange-tim { background-color: #FF8C00; }
        .border-orange-tim { border-color: #FF8C00; }
        body { background-color: #000; color: #fff; }
    </style>
</head>
<body class="pb-32">

    <header class="p-6 text-center border-b border-gray-800">
        <h1 class="text-3xl font-bold orange-tim uppercase tracking-widest">Tim's Resto</h1>
        <p class="text-gray-400 text-sm italic">L'art de la cuisine à Cocody</p>
        <div id="table-display" class="mt-2 text-xs bg-white text-black inline-block px-3 py-1 rounded-full font-bold">Table : Non définie</div>
    </header>

    <div class="p-4">
        <a href="https://www.google.com/maps/dir/?api=1&destination=Cocody,Abidjan" target="_blank" 
           class="block w-full text-center border border-orange-tim orange-tim py-2 rounded-lg font-bold text-sm">
           <i class="fas fa-location-dot"></i> Nous trouver à Cocody
        </a>
    </div>

    <main class="p-4 space-y-10" id="menu-root">
        
        <section>
            <h2 class="text-xl font-bold border-l-4 border-orange-tim pl-3 mb-6">Plats du Jour</h2>
            <div class="grid gap-6">
                <div class="bg-gray-900 rounded-2xl overflow-hidden shadow-lg border border-gray-800">
                    <img src="riz_sauce_graine.jpg" class="w-full h-48 object-cover rounded-t-2xl">
                    <div class="p-4">
                        <div class="flex justify-between items-center">
                            <h3 class="font-bold text-lg">Riz Sauce Graine</h3>
                            <span class="orange-tim font-black">3500 FCFA</span>
                        </div>
                        <div class="flex items-center justify-between mt-4">
                            <p class="text-gray-400 text-sm">Complet avec viande</p>
                            <div class="flex items-center gap-3">
                                <button onclick="changeQty('Riz Sauce Graine', 3500, -1)" class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center">-</button>
                                <span id="qty-Riz-Sauce-Graine" class="font-bold">0</span>
                                <button onclick="changeQty('Riz Sauce Graine', 3500, 1)" class="w-8 h-8 rounded-full bg-orange-tim flex items-center justify-center">+</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-gray-900 rounded-2xl overflow-hidden shadow-lg border border-gray-800">
                    <img src="riz_sauce_claire.jpg" class="w-full h-48 object-cover rounded-t-2xl">
                    <div class="p-4">
                        <div class="flex justify-between items-center">
                            <h3 class="font-bold text-lg">Riz Sauce Claire</h3>
                            <span class="orange-tim font-black">3000 FCFA</span>
                        </div>
                        <div class="flex items-center justify-between mt-4">
                            <p class="text-gray-400 text-sm">Option poisson fumé</p>
                            <div class="flex items-center gap-3">
                                <button onclick="changeQty('Riz Sauce Claire', 3000, -1)" class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center">-</button>
                                <span id="qty-Riz-Sauce-Claire" class="font-bold">0</span>
                                <button onclick="changeQty('Riz Sauce Claire', 3000, 1)" class="w-8 h-8 rounded-full bg-orange-tim flex items-center justify-center">+</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2 class="text-xl font-bold border-l-4 border-orange-tim pl-3 mb-6">Fast Food</h2>
            <div class="grid gap-6">
                <div class="bg-gray-900 rounded-2xl overflow-hidden shadow-lg border border-gray-800">
                    <img src="Tacos.jpg" class="w-full h-48 object-cover rounded-t-2xl">
                    <div class="p-4">
                        <div class="flex justify-between items-center">
                            <h3 class="font-bold text-lg">Tacos XL</h3>
                            <span class="orange-tim font-black">4500 FCFA</span>
                        </div>
                        <div class="flex items-center justify-between mt-4">
                            <p class="text-gray-400 text-sm">Frites et sauce maison</p>
                            <div class="flex items-center gap-3">
                                <button onclick="changeQty('Tacos', 4500, -1)" class="w-8 h-8 rounded-full bg-gray-800 flex items-center justify-center">-</button>
                                <span id="qty-Tacos" class="font-bold">0</span>
                                <button onclick="changeQty('Tacos', 4500, 1)" class="w-8 h-8 rounded-full bg-orange-tim flex items-center justify-center">+</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div class="fixed bottom-0 left-0 right-0 p-4 bg-black border-t border-gray-800 shadow-2xl">
        <div class="max-w-md mx-auto flex items-center justify-between gap-4">
            <div class="text-sm">
                <p class="text-gray-400">Total à payer</p>
                <p id="total-price" class="text-xl font-black orange-tim">0 FCFA</p>
            </div>
            <button onclick="sendWhatsApp()" class="flex-1 bg-orange-tim text-white py-4 rounded-xl font-bold flex items-center justify-center gap-2">
                <i class="fab fa-whatsapp text-xl"></i> Commander
            </button>
        </div>
    </div>

    <script>
        // Récupérer le numéro de table dans l'URL
        const urlParams = new URLSearchParams(window.location.search);
        const tableNum = urlParams.get('table') || "Non spécifiée";
        document.getElementById('table-display').innerText = "Table : " + tableNum;

        let cart = {};

        function changeQty(name, price, change) {
            if (!cart[name]) cart[name] = { qty: 0, price: price };
            
            cart[name].qty += change;
            if (cart[name].qty < 0) cart[name].qty = 0;

            // Mise à jour de l'affichage
            const displayId = "qty-" + name.replace(/\s+/g, '-');
            const el = document.getElementById(displayId);
            if(el) el.innerText = cart[name].qty;

            calculateTotal();
        }

        function calculateTotal() {
            let total = 0;
            for (let item in cart) {
                total += cart[item].qty * cart[item].price;
            }
            document.getElementById('total-price').innerText = total + " FCFA";
        }

        function sendWhatsApp() {
            let message = `*NOUVELLE COMMANDE - TABLE ${tableNum}*\n------------------\n`;
            let hasItems = false;
            let total = 0;

            for (let item in cart) {
                if (cart[item].qty > 0) {
                    message += `• ${cart[item].qty}x ${item}\n`;
                    total += cart[item].qty * cart[item].price;
                    hasItems = true;
                }
            }

            if (!hasItems) {
                alert("Votre panier est vide !");
                return;
            }

            message += `------------------\n*TOTAL : ${total} FCFA*`;
            message += `\n\n_Merci de confirmer ma commande et de m'indiquer le temps d'attente._`;

            const phone = "2250779212851";
            const encodedMessage = encodeURIComponent(message);
            window.location.href = `https://wa.me/${phone}?text=${encodedMessage}`;
        }
    </script>
</body>
</html>
