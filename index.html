<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu Digital - Chez Tim's Resto</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/dist/css/font-awesome.min.css">
    <style>
        .cart-badge { transition: all 0.3s ease; }
        .menu-image { aspect-ratio: 16/9; object-fit: cover; }
    </style>
</head>
<body class="bg-black text-white font-sans pb-32">

    <header class="relative py-10 text-center bg-zinc-900 border-b border-orange-500/30 shadow-2xl">
        <div class="flex justify-center mb-4">
            <img src="logo.jpg" alt="Logo Chez Tim's" class="w-32 h-32 rounded-full border-2 border-orange-500 shadow-orange-500/20 shadow-lg">
        </div>
        <div id="table-display" class="inline-block bg-orange-600 text-black px-4 py-1 rounded-full font-black text-sm uppercase tracking-tighter mb-2">
            Table en attente...
        </div>
        <p class="text-gray-400 italic text-sm">Cuisine Africaine & Européenne</p>
    </header>

    <main class="p-4 max-w-md mx-auto space-y-12">

        <section id="plats-du-jour">
            <h2 class="text-2xl font-bold border-l-4 border-orange-500 pl-3 mb-6 uppercase text-orange-400 italic">Plat du Jour</h2>
            <div class="space-y-8">
                <div class="item-card" data-name="Sauce Graine (Placali, Riz)" data-price="2000">
                    <img src="riz.jpg" class="w-full rounded-2xl menu-image border border-zinc-800 shadow-lg mb-3">
                    <div class="flex justify-between items-start mb-2">
                        <span class="text-lg font-bold">Sauce Graine (Placali, Riz)</span>
                        <span class="text-orange-500 font-black text-xl">2000 F</span>
                    </div>
                    <div class="flex items-center gap-4 bg-zinc-900 w-fit rounded-xl p-1 border border-zinc-700">
                        <button onclick="changeQty(this, -1)" class="w-10 h-10 bg-zinc-800 rounded-lg text-xl font-bold">-</button>
                        <span class="qty font-bold text-lg w-6 text-center">0</span>
                        <button onclick="changeQty(this, 1)" class="w-10 h-10 bg-orange-600 rounded-lg text-xl font-bold text-black">+</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="volailles">
            <h2 class="text-2xl font-bold border-l-4 border-orange-500 pl-3 mb-6 uppercase text-orange-400 italic">Nos Volailles</h2>
            <div class="grid grid-cols-1 gap-6">
                <div class="item-card bg-zinc-900 p-4 rounded-3xl border border-zinc-800" data-name="Poulet Africain" data-price="10000">
                    <img src="poulet.jpg" class="w-full rounded-2xl menu-image mb-4">
                    <div class="flex justify-between items-center mb-4">
                        <span class="font-bold uppercase">Poulet Africain</span>
                        <span class="text-orange-500 font-black text-lg">10 000 F</span>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-4 bg-black rounded-xl p-1 border border-zinc-700">
                            <button onclick="changeQty(this, -1)" class="w-8 h-8 rounded-lg font-bold">-</button>
                            <span class="qty font-bold text-lg w-6 text-center">0</span>
                            <button onclick="changeQty(this, 1)" class="w-8 h-8 bg-orange-600 rounded-lg font-bold text-black">+</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="accompagnements">
            <h2 class="text-2xl font-bold border-l-4 border-orange-500 pl-3 mb-6 uppercase text-orange-400 italic text-white">Accompagnements</h2>
            <div class="bg-zinc-900 rounded-3xl p-4 space-y-4">
                <div class="flex justify-between items-center item-card" data-name="Alloco" data-price="1000">
                    <span>Alloco</span>
                    <div class="flex items-center gap-3">
                        <span class="font-bold text-orange-500">1000 F</span>
                        <button onclick="changeQty(this, 1)" class="bg-orange-600 text-black w-8 h-8 rounded-full font-bold">+</button>
                        <span class="qty hidden">0</span>
                    </div>
                </div>
                <div class="flex justify-between items-center item-card" data-name="Attieke" data-price="500">
                    <span>Attieke</span>
                    <div class="flex items-center gap-3">
                        <span class="font-bold text-orange-500">500 F</span>
                        <button onclick="changeQty(this, 1)" class="bg-orange-600 text-black w-8 h-8 rounded-full font-bold">+</button>
                        <span class="qty hidden">0</span>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <div class="fixed bottom-0 left-0 right-0 p-4 bg-zinc-900/95 backdrop-blur-xl border-t border-orange-500/50 space-y-3 shadow-[0_-10px_40px_rgba(0,0,0,0.8)]">
        <div class="flex justify-between items-center px-2">
            <span class="text-gray-400 font-bold uppercase text-xs">Total Panier:</span>
            <span id="total-price" class="text-2xl font-black text-orange-500">0 FCFA</span>
        </div>
        
        <div class="flex gap-2">
            <button onclick="sendOrder()" class="flex-[2] bg-green-600 text-white py-4 rounded-2xl flex items-center justify-center gap-3 font-black shadow-lg active:scale-95 transition-all">
                <i class="fab fa-whatsapp text-2xl"></i> PASSER COMMANDE
            </button>
            
            <a href="https://www.google.com/maps/search/Cocody+Abidjan" target="_blank" class="flex-1 bg-white text-black py-4 rounded-2xl flex items-center justify-center shadow-lg active:scale-95 transition-all">
                <i class="fas fa-map-marker-alt text-xl"></i>
            </a>
        </div>
        <p class="text-[10px] text-center text-gray-500 uppercase tracking-widest">La restauratrice confirmera votre temps de cuisson</p>
    </div>

    <script>
        // DETECTION DU NUMERO DE TABLE DANS L'URL
        const urlParams = new URLSearchParams(window.location.search);
        const tableNum = urlParams.get('table') || "Non spécifiée";
        document.getElementById('table-display').innerText = "Table N° " + tableNum;

        let cart = {};

        function changeQty(btn, delta) {
            const card = btn.closest('.item-card');
            const name = card.getAttribute('data-name');
            const price = parseInt(card.getAttribute('data-price'));
            const qtySpan = card.querySelector('.qty');
            
            let currentQty = parseInt(qtySpan.innerText);
            currentQty = Math.max(0, currentQty + delta);
            qtySpan.innerText = currentQty;
            
            if(currentQty > 0) {
                cart[name] = { price: price, qty: currentQty };
                qtySpan.classList.remove('hidden');
            } else {
                delete cart[name];
                if(qtySpan.classList.contains('hidden') === false && delta < 0) qtySpan.innerText = 0;
            }
            updateTotal();
        }

        function updateTotal() {
            let total = 0;
            for (let item in cart) {
                total += cart[item].price * cart[item].qty;
            }
            document.getElementById('total-price').innerText = total + " FCFA";
        }

        function sendOrder() {
            if (Object.keys(cart).length === 0) {
                alert("Votre panier est vide !");
                return;
            }

            let message = `*NOUVELLE COMMANDE - TABLE ${tableNum}*%0A`;
            message += `*------------------------------*%0A`;
            let total = 0;

            for (let item in cart) {
                let subtotal = cart[item].price * cart[item].qty;
                message += `• ${cart[item].qty}x ${item} : ${subtotal} F%0A`;
                total += subtotal;
            }

            message += `*------------------------------*%0A`;
            message += `*TOTAL : ${total} FCFA*%0A%0A`;
            message += `_Merci de confirmer la réception et d'estimer le temps de cuisson._`;

            // Envoi vers le numéro de la restauratrice
            window.open(`https://wa.me/2250779212851?text=${message}`, '_blank');
        }
    </script>
</body>
</html>
